{"version":3,"file":"/packages/telescope-singleday.js","sources":["telescope-singleday//Users/grahammcbain/apto/Telescope/packages/telescope-singleday/package-tap.i18n","telescope-singleday/lib/routes.js","telescope-singleday/lib/singleday.js","telescope-singleday//Users/grahammcbain/apto/Telescope/packages/telescope-singleday/i18n/de.i18n.json","telescope-singleday//Users/grahammcbain/apto/Telescope/packages/telescope-singleday/i18n/en.i18n.json","telescope-singleday//Users/grahammcbain/apto/Telescope/packages/telescope-singleday/i18n/es.i18n.json","telescope-singleday//Users/grahammcbain/apto/Telescope/packages/telescope-singleday/i18n/fr.i18n.json","telescope-singleday//Users/grahammcbain/apto/Telescope/packages/telescope-singleday/i18n/it.i18n.json","telescope-singleday//Users/grahammcbain/apto/Telescope/packages/telescope-singleday/i18n/tr.i18n.json","telescope-singleday//Users/grahammcbain/apto/Telescope/packages/telescope-singleday/i18n/zh-CN.i18n.json"],"names":[],"mappings":";;;;;;;;AAAA,qH;;AAEA,+D;AACA,gD;;;;;;;;;;;;;;;;;;;ACHA,6B;;AAEA,gD;AACA,wC;AACA,sB;AACA,uD;AACA,sH;AACA,iB;AACA,yB;AACA,6D;AACA,2D;AACA,U;AACA,Y;AACA,sD;AACA,0D;AACA,M;AACA,I;AACA,oB;AACA,gI;AACA,iB;AACA,yB;AACA,6D;AACA,2D;AACA,U;AACA,+C;AACA,4C;;AAEA,yE;AACA,gE;;AAEA,qB;AACA,wE;AACA,wE;;AAEA,Y;AACA,8B;AACA,kB;AACA,M;AACA,I;AACA,kB;AACA,G;;AAEA,4B;;AAEA,W;;AAEA,6C;AACA,yB;AACA,qC;AACA,K;;AAEA,2B;AACA,iC;AACA,qC;AACA,K;;AAEA,G;;;;;;;;;;;;;;;;;;ACxDA,c;AACA,gC;AACA,iB;AACA,G;;AAEA,0C;AACA,U;AACA,W;AACA,iB;AACA,2B;AACA,yB;AACA,O;AACA,M;AACA,c;AACA,iD;AACA,K;AACA,I;AACA,C;;AAEA,gC;AACA,6C;AACA,wB;AACA,8B;AACA,sB;AACA,K;AACA,E;;;;;;;;;;;;;;;;;;ACzBA,6B;AACA,yC;AACA,sC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,wT;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,yC;AACA,sC;;AAEA,gC;AACA,yD;AACA,C;AACA,gD;AACA,yS;;;;;;;;;;;;;;;;;;;ACRA,6B;AACA,yC;AACA,sC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,4Q;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,yC;AACA,sC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,4T;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,yC;AACA,sC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,kV;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,yC;AACA,sC;;AAEA,gC;AACA,yD;AACA,C;AACA,+C;AACA,kC;AACA,C;;AAEA,0D;AACA,6C;AACA,C;;AAEA,kU;;;;;;;;;;;;;;;;;;;ACfA,6B;AACA,yC;AACA,sC;;AAEA,gC;AACA,yD;AACA,C;AACA,kD;AACA,qC;AACA,C;;AAEA,6D;AACA,gD;AACA,C;;AAEA,2M","sourcesContent":["TAPi18n.packages[\"telescope-singleday\"] = {\"translation_function_name\":\"__\",\"helper_name\":\"_\",\"namespace\":\"project\"};\n\n// define package's translation function (proxy to the i18next)\n__ = TAPi18n._getPackageI18nextProxy(\"project\");\n","// Controller for post digest\n\nPostsDigestController = RouteController.extend({\n  template: getTemplate('posts_digest'),\n  waitOn: function() {\n    // if day is set, use that. If not default to today\n    var currentDate = this.params.day ? new Date(this.params.year, this.params.month-1, this.params.day) : new Date(),\n        terms = {\n          view: 'digest',\n          after: moment(currentDate).startOf('day').toDate(),\n          before: moment(currentDate).endOf('day').toDate()\n        };\n    return [\n      coreSubscriptions.subscribe('postsList', terms),\n      coreSubscriptions.subscribe('postsListUsers', terms)\n    ];\n  },\n  data: function() {\n    var currentDate = this.params.day ? new Date(this.params.year, this.params.month-1, this.params.day) : Session.get('today'),\n        terms = {\n          view: 'digest',\n          after: moment(currentDate).startOf('day').toDate(),\n          before: moment(currentDate).endOf('day').toDate()\n        },\n        parameters = getPostsParameters(terms);\n    Session.set('currentDate', currentDate);\n\n    parameters.find.createdAt = { $lte: Session.get('listPopulatedAt') };\n    var posts = Posts.find(parameters.find, parameters.options);\n\n    // Incoming posts\n    parameters.find.createdAt = { $gt: Session.get('listPopulatedAt') };\n    var postsIncoming = Posts.find(parameters.find, parameters.options);\n\n    return {\n      incoming: postsIncoming,\n      posts: posts\n    };\n  },\n  fastRender: true\n});\n\nMeteor.startup(function () {\n\n  // Digest\n\n  Router.route('/digest/:year/:month/:day', {\n    name: 'posts_digest',\n    controller: PostsDigestController\n  });\n\n  Router.route('/digest', {\n    name: 'posts_digest_default',\n    controller: PostsDigestController\n  });\n\n});","viewNav.push({\n  route: 'posts_digest_default',\n  label: 'digest'\n});\n\nviewParameters.digest = function (terms) {\n  return {\n    find: {\n      postedAt: {\n        $gte: terms.after, \n        $lt: terms.before\n      }\n    },\n    options: {\n      sort: {sticky: -1, baseScore: -1, limit: 0}\n    }\n  };\n}\n\ngetDigestURL = function(moment){\n  return Router.routes['posts_digest'].path({\n    year: moment.year(),\n    month: moment.month() + 1,\n    day: moment.date()\n  });\n};","var _ = Package.underscore._,\n    package_name = \"telescope-singleday\",\n    namespace = \"telescope-singleday\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"de\"])) {\n  TAPi18n.translations[\"de\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"de\"][namespace])) {\n  TAPi18n.translations[\"de\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"de\"][namespace], {\"the_top_5_posts_of_each_day\":\"Die Top-5-Links eines jeden Tages.\",\"previous_day\":\"Einen Tag zurück\",\"next_day\":\"Einen Tag vor\",\"sorry_no_posts_for_today\":\"Heute gibt es keine Links.\",\"sorry_no_posts_for\":\"Keine Links für\",\"today\":\"Heute\",\"yesterday\":\"Gestern\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-singleday\",\n    namespace = \"telescope-singleday\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\n// integrate the fallback language translations \nTAPi18n.addResourceBundle(\"en\", namespace, {\"the_top_5_posts_of_each_day\":\"The top 5 posts of each day.\",\"previous_day\":\"Previous Day\",\"next_day\":\"Next Day\",\"sorry_no_posts_for_today\":\"Sorry, no posts for today\",\"sorry_no_posts_for\":\"Sorry, no posts for\",\"today\":\"Today\",\"yesterday\":\"Yesterday\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-singleday\",\n    namespace = \"telescope-singleday\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"es\"])) {\n  TAPi18n.translations[\"es\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"es\"][namespace])) {\n  TAPi18n.translations[\"es\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"es\"][namespace], {\"the_top_5_posts_of_each_day\":\"Los 5 mejores posts de cada día\",\"previous_day\":\"Dia anterior\",\"next_day\":\"Dia siguiente\",\"sorry_no_posts_for_today\":\"Lo sentimos, no hay post para hoy\",\"today\":\"Hoy\",\"yesterday\":\"Ayer\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-singleday\",\n    namespace = \"telescope-singleday\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"fr\"])) {\n  TAPi18n.translations[\"fr\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"fr\"][namespace])) {\n  TAPi18n.translations[\"fr\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"fr\"][namespace], {\"the_top_5_posts_of_each_day\":\"5 meilleurs post par jours\",\"previous_day\":\"Jour précédent\",\"next_day\":\"Jour suivant\",\"sorry_no_posts_for_today\":\"Désolé, aucun post aujourd'hui\",\"sorry_no_posts_for\":\"Désolé, aucun post pour\",\"today\":\"Aujourd'hui\",\"yesterday\":\"Hier\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-singleday\",\n    namespace = \"telescope-singleday\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"it\"])) {\n  TAPi18n.translations[\"it\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"it\"][namespace])) {\n  TAPi18n.translations[\"it\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"it\"][namespace], {\"the_top_5_posts_of_each_day\":\"I 5 migliori post di ogni giorno.\",\"previous_day\":\"Giorno Precedente\",\"next_day\":\"Giorno Successivo\",\"sorry_no_posts_for_today\":\"Ci spiace, non ci sono post per oggi\",\"sorry_no_posts_for\":\"Ci spiace, non ci sono post per\",\"today\":\"Oggi\",\"yesterday\":\"Ieri\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-singleday\",\n    namespace = \"telescope-singleday\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"tr\"])) {\n  TAPi18n.translations[\"tr\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"tr\"][namespace])) {\n  TAPi18n.translations[\"tr\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"tr\"][namespace], {\"the_top_5_posts_of_each_day\":\"Her günün en üst 5 paylaşımı\",\"previous_day\":\"Önceki gün\",\"next_day\":\"Sonraki gün\",\"Sorry, no posts for today\":\"Özür dileriz, bugün bir paylaşım yok\",\"sorry_no_posts_for_today\":\"Özür dileriz, paylaşım yok\",\"today\":\"Bugün\",\"yesterday\":\"Dün\"});\n","var _ = Package.underscore._,\n    package_name = \"telescope-singleday\",\n    namespace = \"telescope-singleday\";\n\nif (package_name != \"project\") {\n    namespace = TAPi18n.packages[package_name].namespace;\n}\nif(_.isUndefined(TAPi18n.translations[\"zh-CN\"])) {\n  TAPi18n.translations[\"zh-CN\"] = {};\n}\n\nif(_.isUndefined(TAPi18n.translations[\"zh-CN\"][namespace])) {\n  TAPi18n.translations[\"zh-CN\"][namespace] = {};\n}\n\n_.extend(TAPi18n.translations[\"zh-CN\"][namespace], {\"the_top_5_posts_of_each_day\":\"每天前5名的帖子\",\"previous_day\":\"前一天\",\"next_day\":\"后一天\",\"sorry_no_posts_for_today\":\"抱歉今天没有新的帖子\",\"today\":\"今天\",\"yesterday\":\"昨天\"});\n"]}